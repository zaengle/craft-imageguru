import{_ as s,o as a,c as n,Q as o}from"./chunks/framework.19f61efe.js";const f=JSON.parse('{"title":"Writing a Custom Transformer","description":"","frontmatter":{},"headers":[],"relativePath":"04-adding-transformers.md","filePath":"04-adding-transformers.md"}'),e={name:"04-adding-transformers.md"},l=o(`<h1 id="writing-a-custom-transformer" tabindex="-1">Writing a Custom Transformer <a class="header-anchor" href="#writing-a-custom-transformer" aria-label="Permalink to &quot;Writing a Custom Transformer&quot;">â€‹</a></h1><p>If ImageGuru&#39;s bundled transformers don&#39;t meet your needs, you can easily write your own. Transformers must implement the <code>craft\\base\\imagetransforms\\ImageTransformerInterface</code> interface, which requires the following methods:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>public function getTransformUrl(Asset $asset, ImageTransform $imageTransform, bool $immediately = false): string</code></td><td>Returns the URL for an image transform</td></tr><tr><td><code>public function invalidateAssetTransforms(Asset $asset): void</code></td><td>Invalidates all transforms for an asset</td></tr></tbody></table><p>Additionally ImageGuru will pass a <code>VolumeTransformSettings</code> model to the transformer&#39;s constructor, which can be used to pass configuration to the transformer. See the <a href="./02-config.html#volumetransformsettings-passing-configuration-to-transformers">Configuring Transformers</a> for details.</p><p>You can then use your transformer with ImageGuruin just the same way you&#39;d use a bundled transformer, by adding it to the <code>enabledTransformers</code> config option in your <code>config/imageguru.php</code> file, and applying it to a volume in the <code>volumes</code> config option.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;enabledTransformers&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">\\\\</span><span style="color:#9ECBFF;">modules</span><span style="color:#79B8FF;">\\\\</span><span style="color:#9ECBFF;">transformers</span><span style="color:#79B8FF;">\\\\</span><span style="color:#9ECBFF;">CustomTransformer&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;volumes&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;*&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&#39;transformer&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">\\\\</span><span style="color:#9ECBFF;">modules</span><span style="color:#79B8FF;">\\\\</span><span style="color:#9ECBFF;">transformers</span><span style="color:#79B8FF;">\\\\</span><span style="color:#9ECBFF;">CustomTransformer&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&#39;transformBaseUrl&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">getenv</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;TRANSFORM_BASE_URL&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">];</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">return</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;enabledTransformers&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;</span><span style="color:#005CC5;">\\\\</span><span style="color:#032F62;">modules</span><span style="color:#005CC5;">\\\\</span><span style="color:#032F62;">transformers</span><span style="color:#005CC5;">\\\\</span><span style="color:#032F62;">CustomTransformer&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;volumes&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;*&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&#39;transformer&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;</span><span style="color:#005CC5;">\\\\</span><span style="color:#032F62;">modules</span><span style="color:#005CC5;">\\\\</span><span style="color:#032F62;">transformers</span><span style="color:#005CC5;">\\\\</span><span style="color:#032F62;">CustomTransformer&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&#39;transformBaseUrl&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">getenv</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;TRANSFORM_BASE_URL&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">];</span></span></code></pre></div>`,6),p=[l];function r(t,c,y,i,E,m){return a(),n("div",null,p)}const u=s(e,[["render",r]]);export{f as __pageData,u as default};
